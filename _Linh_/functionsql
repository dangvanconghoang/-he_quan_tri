-- HAM CAP NHAT DU LIEU GIA
CREATE OR REPLACE FUNCTION UP_GIA (V_MAVE CHITIETVE.MAVE%TYPE)
RETURN CHITIETVE.MAVE%TYPE
IS
  V_GIA CHITIETVE.GIA%TYPE;
BEGIN
  SELECT CB.GIAVE * ((100 - KM.GIAMGIA) / 100) * (VE.TYLE / 100) 
  INTO V_GIA 
  FROM CHITIETVE CT, VE, CHUYENBAY CB, KHUYENMAI KM 
  WHERE CT.MAVE=V_MAVE AND CT.MAVE=VE.MAVE AND VE.MACB=CB.MACB AND CT.MAKM=KM.MAKM; 
  
  RETURN V_GIA;
END;
